#compdef beagle
#autoload

local -a _1st_arguments
_1st_arguments=(
"commands:show beagle commands"
"help:show beagle help"
"alias:manage aliases"
"article:create an article"
"att:manage attachments"
"cache:manage cache"
"cast:cast entries to another type"
"cat:show entries"
"cmds:show names of all the commands/aliases"
"comment:create a comment"
"comments:list comments"
"config:configure beagle"
"create:create an entry"
"follow:follow beagles"
"fsck:check integrity of kennel"
"git:bridge to git"
"info:manage info"
"init:initialize a beagle"
"log:show log"
"look:open the beagle root directory with SHELL"
"ls:list/search entries"
"mark:manage entry marks"
"mv:move entries to another beagle"
"relation:show beagle names of entries"
"rename:rename a beagle"
"review:create a review"
"rm:delete entries"
"root:show root"
"shell:interactive shell"
"spread:spread entries"
"status:show status"
"unfollow:unfollow beagles"
"update:update entries"
"version:show beagle version"
"web:start web server"
)

_arguments \
  '*:: :->subcmds' && return 0

if (( CURRENT == 1 )); then
  _describe -t commands "beagle subcommand" _1st_arguments
  return
fi

local names;

_beagle_names() {
  names=(`beagle root --names`)
}

case "$words[1]" in
  use|switch|root|rename|unfollow)
    _beagle_names
    _wanted names expl 'all names' compadd -a names ;;
esac

